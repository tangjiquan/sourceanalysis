package com.dbutils.test;

import java.sql.DriverManager;
import java.sql.SQLException;
import java.util.Iterator;
import java.util.List;
import java.util.Map;
import java.util.Map.Entry;

import org.apache.commons.dbutils.QueryRunner;
import org.apache.commons.dbutils.ResultSetHandler;
import org.apache.commons.dbutils.handlers.BeanListHandler;
import org.apache.commons.dbutils.handlers.MapHandler;

import com.mysql.jdbc.Connection;

public class MyTetst {
	
	
	
	public static void TestDbutils(Connection conn) throws SQLException{
		QueryRunner queryRunner = new QueryRunner();
		String sql = null;
		//1. 返回单行记录
		/*System.out.println("返回单行记录，使用Map");
		String sql = "select * from t_user";
		Map<String, Object> map = queryRunner.query(conn, sql, new MapHandler(), (Map<String,Object>)null);
		for(Iterator<Entry<String, Object>> itear = map.entrySet().iterator();itear.hasNext();){
			Entry<String, Object> entry = itear.next();
			System.out.println(entry.getKey()+"---"+entry.getValue());
		}*/
		
		//2. 返回POJO对象列表
	/*	ResultSetHandler<List<User>> handler = new BeanListHandler<User>(User.class);
		List<User> result = null;
		sql = "select * from t_user";
		result = queryRunner.query(conn, sql, handler);
		for(User u : result){
			System.out.println(u);
		}*/
		
		//3. 返回POJO对象
		ResultSetHandler<User> handler = new BeanHandler<User>(User.class)；
	}
	
	
	
	
	
	public static void main(String[] args) {
		String driverName = "com.mysql.jdbc.Driver";
		String url = "jdbc:mysql://127.0.0.1:3306/itat_dbunit";
		String username = "root";
		String password = "";
		Connection conn = null;
		try {
			Class.forName(driverName);
		} catch (ClassNotFoundException e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		}
		
		try {
			conn = (Connection) DriverManager.getConnection(url, username, password);
		} catch (SQLException e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		}
		
		
		try {
			TestDbutils(conn);
		} catch (SQLException e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		}
		
	}
}
